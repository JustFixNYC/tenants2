{
    "$schema": "https://vega.github.io/schema/vega-lite/v3.0.json",
    "title": "Time to complete letter of complaint",
    "width": 400,
    "height": 400,
    "data": {
        "url": "dataset:userstats"
    },
    "mark": "point",
    "transform": [
        {"filter": "datum.letter_submission_date !== null"},
        {
            "calculate": "round((time(datum.letter_submission_date) - time(datum.onboarding_date)) / (1000 * 60))",
            "as": "minutes"
        }
    ],
    "encoding": {
        "y": {"field": "minutes", "type": "quantitative", "scale": {"type": "log"}},
        "x": {"field": "onboarding_date", "type": "temporal"},
        "color": {"field": "issue_count", "type": "quantitative", "scale": {"type": "quantile", "scheme": "orangered"}},
        "size": {"field": "custom_issue_chars", "type": "quantitative"},
        "href": {"field": "url", "type": "nominal"}
    }
}
